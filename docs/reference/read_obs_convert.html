<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Read observations and output to sqlite OBSTABLE file(s) — read_obs_convert • harpIO</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Read observations and output to sqlite OBSTABLE file(s) — read_obs_convert" />
<meta property="og:description" content="Read observations from any source (currently only vobs...) and output the
data to sqlite files." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">harpIO</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9156</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/file_options.html">Options for file formats</a>
    </li>
    <li>
      <a href="../articles/read_raw_forecast.html">Reading forecast model data</a>
    </li>
    <li>
      <a href="../articles/transformations.html">Transforming forecast model data</a>
    </li>
    <li>
      <a href="../articles/write_forecast_data.html">Writing forecast model data</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/harphub/harpIO/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Read observations and output to sqlite OBSTABLE file(s)</h1>
    <small class="dont-index">Source: <a href='https://github.com/harphub/harpIO/blob/master/R/read_obs_convert.R'><code>R/read_obs_convert.R</code></a></small>
    <div class="hidden name"><code>read_obs_convert.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Read observations from any source (currently only vobs...) and output the
data to sqlite files.</p>
    </div>

    <pre class="usage"><span class='fu'>read_obs_convert</span>(
  <span class='no'>start_date</span>,
  <span class='no'>end_date</span>,
  <span class='kw'>by</span> <span class='kw'>=</span> <span class='st'>"3h"</span>,
  <span class='kw'>obs_path</span> <span class='kw'>=</span> <span class='st'>"."</span>,
  <span class='kw'>obs_format</span> <span class='kw'>=</span> <span class='st'>"vobs"</span>,
  <span class='kw'>obsfile_template</span> <span class='kw'>=</span> <span class='st'>"vobs"</span>,
  <span class='kw'>parameter</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>sqlite_path</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>sqlite_template</span> <span class='kw'>=</span> <span class='st'>"obstable"</span>,
  <span class='kw'>return_data</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>iterations_per_write</span> <span class='kw'>=</span> <span class='fl'>24</span>,
  <span class='kw'>sqlite_synchronous</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"off"</span>, <span class='st'>"normal"</span>, <span class='st'>"full"</span>, <span class='st'>"extra"</span>),
  <span class='kw'>sqlite_journal_mode</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"delete"</span>, <span class='st'>"truncate"</span>, <span class='st'>"persist"</span>, <span class='st'>"memory"</span>, <span class='st'>"wal"</span>, <span class='st'>"off"</span>),
  <span class='no'>...</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>start_date</th>
      <td><p>Date of the first observations to be read in. Should be in
YYYYMMDDhh format. Can be numeric or charcter.</p></td>
    </tr>
    <tr>
      <th>end_date</th>
      <td><p>Date of the last observations to be read in. Should be in
YYYYMMDDhh format. Can be numeric or charcter.</p></td>
    </tr>
    <tr>
      <th>by</th>
      <td><p>The time between observations. Should be a string of a number
followed by a letter (the defualt is "6h"), where the letter gives the
units - may be d for days, h for hours or m for minutes.</p></td>
    </tr>
    <tr>
      <th>obs_path</th>
      <td><p>The path for the input observation files. obs_path will, in
most cases, form part of the file template.</p></td>
    </tr>
    <tr>
      <th>obs_format</th>
      <td><p>The format of the input observation files. Currently only
"vobs".</p></td>
    </tr>
    <tr>
      <th>obsfile_template</th>
      <td><p>The template for the observation files. Currently
only "vobs".</p></td>
    </tr>
    <tr>
      <th>parameter</th>
      <td><p>Not used for vobs.</p></td>
    </tr>
    <tr>
      <th>sqlite_path</th>
      <td><p>If not NULL, sqlite files are generated and written to the
directory specified here.</p></td>
    </tr>
    <tr>
      <th>sqlite_template</th>
      <td><p>The template for the sqlite observations file. The
default is "obstable", which is "sqlite_path/OBSTABLE_YYYY.sqlite".</p></td>
    </tr>
    <tr>
      <th>return_data</th>
      <td><p>Whether to return the data to the calling environment. The
default is FALSE.</p></td>
    </tr>
    <tr>
      <th>iterations_per_write</th>
      <td><p>The number of iterations of "by" before each
write to the sqlite file. The default is 24.</p></td>
    </tr>
    <tr>
      <th>sqlite_synchronous</th>
      <td><p>The synchronus setting for sqlite files. The
defualt is "off", but could also be "normal", "full", or "extra". See
<a href='https://www.sqlite.org/pragma.html#pragma_synchronous'>https://www.sqlite.org/pragma.html#pragma_synchronous</a> for more
information.</p></td>
    </tr>
    <tr>
      <th>sqlite_journal_mode</th>
      <td><p>The journal mode for the sqlite files. The default
is "delete", but can also be "truncate", "persist", "memory", "wal", or
"off". See <a href='https://www.sqlite.org/pragma.html#pragma_journal_mode'>https://www.sqlite.org/pragma.html#pragma_journal_mode</a> for
more information.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Arguments to read functions. Not currently used.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>If return_data is TRUE - a list with four data frames - one for synop
  (near surface) observations, one for the units of the synop observations,
  one for the temp (upper air) observations, and one for the units of the
  temp observations.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function is used for reading point observations from files and ouputting
the data to sqlite files. Where observations are stored in files, the time
taken to read in the data can be heavily depndent on the number of files and
the amount of data in them. Therefore, to make the observaton data availble
more quickly for future use this function should be used to save the
interpolated data in sqlite files.</p>
<p>Sqlite is a portable file based database solution with the ability to query
sqlite files using SQL syntax. This makes accessing data fast, and ensures
that you only read the data that you need.</p>
<p>To output the data to sqlite files, a path to where you want the files to be
written must be given in the <code>sqlite_path</code> argument. To return the data
to the calling environment you must set <code>return_data = TRUE</code> - by
default no data are returned. This is because <code>read_det_interpolate</code>
could be processing large volumes of data and returning those data to the
environment could result in exceeding memory capacity. If you set neither
<code>sqlite_path</code>, nor <code>return_data</code> explicitly, it can appear that
this function does nothing.</p>
<p>For observations already stored in databases, it may be better to read
directly from the database.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='kw'>if</span> (<span class='fu'><a href='https://rdrr.io/r/base/ns-load.html'>requireNamespace</a></span>(<span class='st'>"harpData"</span>, <span class='kw'>quietly</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)) {
  <span class='fu'>read_obs_convert</span>(
    <span class='kw'>start_date</span>  <span class='kw'>=</span> <span class='fl'>2019021700</span>,
    <span class='kw'>end_date</span>    <span class='kw'>=</span> <span class='fl'>2019022023</span>,
    <span class='kw'>by</span>          <span class='kw'>=</span> <span class='st'>"1h"</span>,
    <span class='kw'>obs_path</span>    <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span>(<span class='st'>"vobs"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"harpData"</span>),
    <span class='kw'>return_data</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
  )
}</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Andrew Singleton, Alex Deckmyn.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


