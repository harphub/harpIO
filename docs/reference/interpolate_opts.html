<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Generate Transformation Options — interpolate_opts • harpIO</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Generate Transformation Options — interpolate_opts" />
<meta property="og:description" content="When reading gridded data, three transformations are available: interpolate,
regrid and xsection. Each of these transformations requires their own set of
options, and these functions are used to generate those options." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">harpIO</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9156</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/file_options.html">Options for file formats</a>
    </li>
    <li>
      <a href="../articles/read_raw_forecast.html">Reading forecast model data</a>
    </li>
    <li>
      <a href="../articles/transformations.html">Transforming forecast model data</a>
    </li>
    <li>
      <a href="../articles/write_forecast_data.html">Writing forecast model data</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/harphub/harpIO/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generate Transformation Options</h1>
    <small class="dont-index">Source: <a href='https://github.com/harphub/harpIO/blob/master/R/transform_options.R'><code>R/transform_options.R</code></a></small>
    <div class="hidden name"><code>interpolate_opts.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>When reading gridded data, three transformations are available: interpolate,
regrid and xsection. Each of these transformations requires their own set of
options, and these functions are used to generate those options.</p>
    </div>

    <pre class="usage"><span class='fu'>interpolate_opts</span>(
  <span class='no'>stations</span>,
  <span class='kw'>method</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"nearest"</span>, <span class='st'>"bilinear"</span>, <span class='st'>"bicubic"</span>, <span class='st'>"closest"</span>),
  <span class='kw'>correct_t2m</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>keep_model_t2m</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>lapse_rate</span> <span class='kw'>=</span> <span class='fl'>0.0065</span>,
  <span class='kw'>clim_file</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>clim_file_format</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>clim_file_opts</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>clim_param</span> <span class='kw'>=</span> <span class='st'>"sfc_geo"</span>,
  <span class='kw'>use_mask</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>weights</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>keep_raw_data</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
)

<span class='fu'>regrid_opts</span>(
  <span class='kw'>new_domain</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"nearest"</span>,
  <span class='kw'>clim_file</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>clim_file_format</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>clim_file_opts</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>clim_param</span> <span class='kw'>=</span> <span class='st'>"sfc_geo"</span>,
  <span class='kw'>weights</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>keep_raw_data</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
)

<span class='fu'>xsection_opts</span>(
  <span class='no'>a</span>,
  <span class='no'>b</span>,
  <span class='kw'>horizontal_res</span> <span class='kw'>=</span> <span class='fl'>2500</span>,
  <span class='kw'>vertical_res</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Log.html'>log</a></span>(<span class='fl'>10</span>),
  <span class='kw'>clim_file</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>clim_file_format</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>clim_file_opts</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>clim_param</span> <span class='kw'>=</span> <span class='st'>"sfc_geo"</span>,
  <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"bilinear"</span>,
  <span class='kw'>keep_raw_data</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>stations</th>
      <td><p>A data frame of points to interpolate to. Must have the
columns 'SID', for a station ID, lat for latitude and lon for longitude.</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>The interpolation method. Can be 'nearest' or 'closest' for
nearest neighbour interpolation, 'bilinear', or 'bicubic'. For
<code>regrid_opts</code> 'mean' is also available for upscaling.</p></td>
    </tr>
    <tr>
      <th>correct_t2m</th>
      <td><p>Logical. Whether to make a height correction to 2m
temperature to account for differences between the model elevation and the
station elevation.</p></td>
    </tr>
    <tr>
      <th>keep_model_t2m</th>
      <td><p>Logical. Whether to keep the uncorrected 2m temperature
if <code>correct_t2m = TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>lapse_rate</th>
      <td><p>The lapse rate in K/m to use for the 2m temperature heigth
correction. The default is the standard moist adiabitic lapse rate of
0.0065 K/m.</p></td>
    </tr>
    <tr>
      <th>clim_file</th>
      <td><p>A file containing model orography or surface geopential on
the same grid as the data to be read in so that height corrections to 2m
temperature can be made. It will also contain a land sea mask if masked
interpolation is to be done. For initialising the domain, any parameter,
passed in 'clim_param' can be used.</p></td>
    </tr>
    <tr>
      <th>clim_file_format</th>
      <td><p>The format of the clim_file. If set to NULL, a guess
will be made.</p></td>
    </tr>
    <tr>
      <th>clim_file_opts</th>
      <td><p>Options for reading the clim_file, depending on the
format of the clim_file.</p></td>
    </tr>
    <tr>
      <th>clim_param</th>
      <td><p>The parameter to read from 'clim_file'. If
<code>correct_t2m = TRUE</code> then this should be either surface geopotential
or terrain height in meters, otherwise for the purposes of intialising
interpolation weights, any paramter that exists in 'clim_file' can be used.</p></td>
    </tr>
    <tr>
      <th>use_mask</th>
      <td><p>Logical. Whether to use a mask in the interpolation. Requires
that 'stations' has an 'lsm' column and clim_file includes a land-sea mask.</p></td>
    </tr>
    <tr>
      <th>weights</th>
      <td><p>Interpolation weights if they have already been calculated.</p></td>
    </tr>
    <tr>
      <th>keep_raw_data</th>
      <td><p>Logical. Whether to keep the untransformed full gridded
data field. The default is FALSE.</p></td>
    </tr>
    <tr>
      <th>new_domain</th>
      <td><p>A geofield or geodomain object on the grid to which the
data should be regridded.</p></td>
    </tr>
    <tr>
      <th>a</th>
      <td><p>A length 2 numeric vector with the longitude and latitude of the
left hand edge of the cross section.</p></td>
    </tr>
    <tr>
      <th>b</th>
      <td><p>A length 2 numeric vector with the longitude and latitude of the
right hand edge of the cross section.</p></td>
    </tr>
    <tr>
      <th>horizontal_res</th>
      <td><p>The horizontal grid length of the cross section in
meters. The default is 2500m.</p></td>
    </tr>
    <tr>
      <th>vertical_res</th>
      <td><p>The vertical grid length of the cross section. For data
on pressure levels or model levels this should be in hPa. For data on
height levels this should be in meters. The default is log(10).</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list of options that will be used in the transformation.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>interpolate_opts</code> generates options for interpolating gridded data to
points, or stations. If no stations are passed, a default list of stations,
accessed from the harpIO built in dataset stations_list is used. If 2m
temperature is to be read, the deafult behaviour is to attempt to height
correct for differences between the model elevation and the elevation at the
actual station. The default interpolation method is nearest-neighbour.</p>
<p><code>regrid_opts</code> generates options to regrid the data from its native grid
to a new grid. The new grid is specified either as a
<a href='https://rdrr.io/pkg/meteogrid/man/geofield.html'>geofield</a> or <a href='https://rdrr.io/pkg/meteogrid/man/geodomain.html'>geodomain</a> object.
<a href='read_grid.html'>read_grid</a> can be used to read a geofield, or
<a href='https://rdrr.io/pkg/meteogrid/man/Make.domain.html'>Make.domain</a> can be used to make a geodomain. The default
interpolation method is nearest-neighbour.</p>
<p><code>xsection_opts</code> generates options to extract a vertical cross section
from three dimensional gridded data. <code>a</code> and <code>b</code> denote the left
and right hand extents of the vertical cross section. By defualt the cross
sections are interpolated horizontally to a 2.5 km grid length. In the
vertical, if data are on model levels or pressure levels, these are converted
to log(pressure) and by default interpolated to to log(10) hPa levels. The
default interpolation method is bilinear interpolation.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='fu'>interpolate_opts</span>()
<span class='kw'>if</span> (<span class='fu'><a href='https://rdrr.io/r/base/ns-load.html'>requireNamespace</a></span>(<span class='st'>"Rgrib2"</span>, <span class='kw'>quietly</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>) <span class='kw'>&amp;</span> <span class='fu'><a href='https://rdrr.io/r/base/ns-load.html'>requireNamespace</a></span>(<span class='st'>"harpData"</span>, <span class='kw'>quietly</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)) {
  <span class='no'>new_domain</span> <span class='kw'>=</span> <span class='fu'><a href='read_grid.html'>read_grid</a></span>(
    <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span>(<span class='st'>"grib/HARMUK20171015T12Z+003.grib"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"harpData"</span>),
    <span class='kw'>parameter</span> <span class='kw'>=</span> <span class='st'>"T2m"</span>
  )
  <span class='fu'>regrid_opts</span>(<span class='kw'>new_domain</span> <span class='kw'>=</span> <span class='no'>new_domain</span>)
}
<span class='fu'>xsection_opts</span>(<span class='kw'>a</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>5.3</span>, <span class='fl'>60.5</span>), <span class='kw'>b</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>10.8</span>, <span class='fl'>59.9</span>))</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Andrew Singleton, Alex Deckmyn.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


